<img class="banner-backdrop absolute w-full max-w-full z-0" [src]="getBackdropUrl"/>
<div class="h-5/6 w-full p-24 box-border flex gap-12 z-10">
    <img class="min-w-1/4 shadow-lg shadow-black" [src]="getPosterUrl"/>
    <div class="flex flex-col">
      <h1 class="text-8xl text-white">{{ mediaDetails?.name ?? '' }}</h1>
      <p class="text-white w-full line-clamp-5">{{ mediaDetails?.overview ?? '' }}</p>

      <mat-chip-set class="mb-4" aria-label="media-genre">
        @for(genre of genres; track genre) {
          <mat-chip>{{ genre }}</mat-chip>
        }
      </mat-chip-set>

      <div class="flex gap-4 mb-4">
        <button mat-flat-button class="text-2xl">
          <mat-icon>play_arrow</mat-icon>
          Start Watching
        </button>
        <button mat-flat-button>
          <mat-icon>add</mat-icon>
          Add to Watch Later
        </button>
      </div>
    </div>
</div>
<mat-tab-group dynamicHeight>
  <mat-tab label="Seasons & Episodes">
    @if (mediaDetails != null) {
      <div class="flex flex-col box-border p-8">
        <mat-form-field seasonInput class="w-1/4">
          <mat-label>Select Season</mat-label>
          <mat-select [(value)]="activeSeasonNumber" (valueChange)="onActiveSeasonChange($event)">
            @for (season of mediaDetails.seasons; track season.name) {
              <mat-option [value]="season.season_number">{{ season.name }}</mat-option>
            }
          </mat-select>
         </mat-form-field>

         @if (activeSeasonDetails != null) {
          <div class="flex flex-col gap-8">
          @for (episode of activeSeasonDetails.episodes; let index = $index; track episode.episode_number) {
            <div episode-container class="flex w-full p-4 bg-neutral-800 rounded-md gap-8">
              <img style="object-fit: cover;" class="w-1/4 rounded-md flex-none" [src]="TMDB_IMAGE_W500_BASE_URL + episode.still_path" alt="Episode still not available" />
              <div class="flex flex-col w-fit flex-1">
                <h3 class="text-white">{{index + 1}}. {{ episode.name }}</h3>
                <div class="flex gap-4 mb-4">
                  <mat-chip>{{ episode.air_date }}</mat-chip>
                  <mat-chip>{{ episode.runtime }}M</mat-chip>
                </div>
                <p class="text-white">{{ episode.overview }}</p>
              </div>
            </div>
          }
          </div>
         }
      </div>
    }
  </mat-tab>
  <mat-tab label="Cast & Crew">
    <mat-tab-group dynamicHeight>
      <mat-tab label="Cast">
        @if(creditDetails != null) {
          <div class="flex flex-row flex-wrap p-8 gap-4 justify-evenly">
          @for (castEntry of creditDetails.cast; track castEntry.credit_id) {
            <div class="flex flex-col w-60 bg-gray-800 p-2 gap-2 rounded-md">
              <img class="rounded-md" [src]="TMDB_IMAGE_W500_BASE_URL + castEntry.profile_path" />
              <p class="text-white m-0 text-center">{{ castEntry.name }}</p>
              <p class="text-gray-400 m-0 text-center">{{ castEntry.known_for_department }} as {{ castEntry.character }}</p>
            </div>
          }
          </div>
        }
      </mat-tab>
      <mat-tab label="Crew">Crew</mat-tab>
    </mat-tab-group>
  </mat-tab>
  <mat-tab label="Images">
    Images will appear here
  </mat-tab>
  <mat-tab label="Videos">
    Videos will appear here
  </mat-tab>
</mat-tab-group>

